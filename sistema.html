<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Caixa Academia</title>

<style>
body {
  margin:0;
  font-family:Arial;
  background:#0f0f0f;
  color:#fff;
}
header {
  background:#000;
  padding:15px;
  text-align:center;
  border-bottom:2px solid #00e676;
}
.container {
  max-width:1200px;
  margin:auto;
  padding:20px;
}
.card {
  background:#1c1c1c;
  padding:15px;
  border-radius:10px;
  margin-bottom:20px;
}
input {
  width:100%;
  padding:10px;
  margin-top:8px;
  border:none;
  border-radius:6px;
}
button {
  width:100%;
  padding:10px;
  margin-top:10px;
  border:none;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
  background:#00e676;
}
table {
  width:100%;
  border-collapse:collapse;
}
th,td {
  padding:8px;
  text-align:center;
}
.status-ok { color:#00e676; }
.status-atraso { color:#ff5252; }
</style>
</head>

<body>

<header>
<h1>ðŸ’ª Sistema Caixa Academia</h1>
</header>

<div class="container">

<div class="card">
<h2>ðŸ“Š Caixa</h2>
<p>Entradas: R$ <span id="entradas">0</span></p>
<p>SaÃ­das: R$ <span id="saidas">0</span></p>
<hr>
<p><strong>Saldo: R$ <span id="saldo">0</span></strong></p>
</div>

<div class="card">
<h2>ðŸ‘¤ Cadastrar Aluno</h2>
<input id="nomeAluno" placeholder="Nome do aluno">
<input id="mensalidadeAluno" type="number" placeholder="Mensalidade">
<input id="vencimentoAluno" type="date">
<button onclick="cadastrarAluno()">Cadastrar</button>
</div>

<div class="card">
<h2>ðŸ“‹ Lista de Alunos</h2>
<table>
<thead>
<tr>
<th>Nome</th>
<th>Mensalidade</th>
<th>Vencimento</th>
<th>Status</th>
<th>AÃ§Ã£o</th>
</tr>
</thead>
<tbody id="listaAlunos"></tbody>
</table>
</div>

</div>

<script>
let alunos = JSON.parse(localStorage.getItem("alunos")) || [];
let entradas = Number(localStorage.getItem("entradas")) || 0;
let saidas = Number(localStorage.getItem("saidas")) || 0;

const entradasSpan = document.getElementById("entradas");
const saidasSpan = document.getElementById("saidas");
const saldoSpan = document.getElementById("saldo");
const lista = document.getElementById("listaAlunos");

atualizarTela();

function cadastrarAluno() {
  const nome = document.getElementById("nomeAluno").value;
  const mensalidade = Number(document.getElementById("mensalidadeAluno").value);
  const vencimento = document.getElementById("vencimentoAluno").value;

  if (!nome || !mensalidade || !vencimento) {
    alert("Preencha todos os campos");
    return;
  }

  alunos.push({ nome, mensalidade, vencimento });
  salvar();
  atualizarTela();

  document.getElementById("nomeAluno").value = "";
  document.getElementById("mensalidadeAluno").value = "";
  document.getElementById("vencimentoAluno").value = "";
}

function receber(index) {
  entradas += alunos[index].mensalidade;

  const novaData = new Date(alunos[index].vencimento);
  novaData.setDate(novaData.getDate() + 30);
  alunos[index].vencimento = novaData.toISOString().split("T")[0];

  salvar();
  atualizarTela();
}

function atualizarTela() {
  const hoje = new Date().toISOString().split("T")[0];
  lista.innerHTML = "";

  alunos.forEach((a,i)=>{
    const atraso = a.vencimento < hoje;
    lista.innerHTML += `
      <tr>
        <td>${a.nome}</td>
        <td>R$ ${a.mensalidade.toFixed(2)}</td>
        <td>${a.vencimento}</td>
        <td class="${atraso?'status-atraso':'status-ok'}">
          ${atraso?'Em atraso':'Em dia'}
        </td>
        <td>
          <button onclick="receber(${i})">Receber</button>
        </td>
      </tr>`;
  });

  entradasSpan.innerText = entradas.toFixed(2);
  saidasSpan.innerText = saidas.toFixed(2);
  saldoSpan.innerText = (entradas - saidas).toFixed(2);
}

function salvar() {
  localStorage.setItem("alunos", JSON.stringify(alunos));
  localStorage.setItem("entradas", entradas);
  localStorage.setItem("saidas", saidas);
}
</script>

</body>
</html>
