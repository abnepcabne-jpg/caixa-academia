<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Caixa Academia</title>

<style>
body {
  margin:0;
  font-family:Arial;
  background:#0f0f0f;
  color:#fff;
}
header {
  background:#000;
  padding:15px;
  text-align:center;
  border-bottom:3px solid #00e676;
}
.container {
  max-width:1200px;
  margin:auto;
  padding:20px;
}
.card {
  background:#1c1c1c;
  padding:15px;
  border-radius:10px;
  margin-bottom:20px;
}
h2 {
  color:#00e676;
}
input, select {
  width:100%;
  padding:10px;
  margin-top:8px;
  border:none;
  border-radius:6px;
}
button {
  width:100%;
  padding:10px;
  margin-top:10px;
  border:none;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
  background:#00e676;
}
table {
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th, td {
  padding:8px;
  text-align:center;
}
.status-ok { color:#00e676; }
.status-atraso { color:#ff5252; }
hr { border:1px solid #333; }
</style>
</head>

<body>

<header>
<h1>ðŸ’ª Sistema Caixa Academia</h1>
</header>

<div class="container">

<!-- CAIXA -->
<div class="card">
<h2>ðŸ“Š Caixa</h2>
<p>Entradas: R$ <span id="entradas">0</span></p>
<p>SaÃ­das: R$ <span id="saidas">0</span></p>
<hr>
<p><strong>Saldo: R$ <span id="saldo">0</span></strong></p>
</div>

<!-- ENTRADA MANUAL -->
<div class="card">
<h2>âž• Entrada Manual (DiÃ¡ria / Produto)</h2>
<input id="descEntrada" placeholder="DescriÃ§Ã£o (ex: diÃ¡ria, personal)">
<input id="valorEntrada" type="number" placeholder="Valor (R$)">
<button onclick="entradaManual()">Adicionar Entrada</button>
</div>

<!-- SAÃDA -->
<div class="card">
<h2>âž– Gastos / Despesas</h2>
<input id="descSaida" placeholder="DescriÃ§Ã£o (ex: funcionÃ¡rio, limpeza)">
<input id="valorSaida" type="number" placeholder="Valor (R$)">
<button onclick="saida()">Adicionar Gasto</button>
</div>

<!-- CADASTRO ALUNO -->
<div class="card">
<h2>ðŸ‘¤ Cadastrar Aluno</h2>
<input id="nomeAluno" placeholder="Nome do aluno">
<input id="mensalidadeAluno" type="number" placeholder="Mensalidade (R$)">
<input id="vencimentoAluno" type="date">
<button onclick="cadastrarAluno()">Cadastrar Aluno</button>
</div>

<!-- LISTA DE ALUNOS -->
<div class="card">
<h2>ðŸ“‹ Lista de Alunos</h2>
<table>
<thead>
<tr>
<th>Aluno</th>
<th>Mensalidade</th>
<th>Vencimento</th>
<th>Status</th>
<th>AÃ§Ã£o</th>
</tr>
</thead>
<tbody id="listaAlunos"></tbody>
</table>
</div>

</div>

<script>
let alunos = JSON.parse(localStorage.getItem("alunos")) || [];
let entradas = Number(localStorage.getItem("entradas")) || 0;
let saidas = Number(localStorage.getItem("saidas")) || 0;

const entradasSpan = document.getElementById("entradas");
const saidasSpan = document.getElementById("saidas");
const saldoSpan = document.getElementById("saldo");
const lista = document.getElementById("listaAlunos");

atualizarTela();

/* ===== ENTRADAS MANUAIS ===== */
function entradaManual() {
  const valor = Number(valorEntrada.value);
  if (valor <= 0) return;
  entradas += valor;
  salvar();
  atualizarTela();
  valorEntrada.value = "";
  descEntrada.value = "";
}

/* ===== SAÃDAS ===== */
function saida() {
  const valor = Number(valorSaida.value);
  if (valor <= 0) return;
  saidas += valor;
  salvar();
  atualizarTela();
  valorSaida.value = "";
  descSaida.value = "";
}

/* ===== ALUNOS ===== */
function cadastrarAluno() {
  const nome = nomeAluno.value;
  const mensalidade = Number(mensalidadeAluno.value);
  const vencimento = vencimentoAluno.value;

  if (!nome || !mensalidade || !vencimento) {
    alert("Preencha todos os campos");
    return;
  }

  alunos.push({ nome, mensalidade, vencimento });
  salvar();
  atualizarTela();

  nomeAluno.value = "";
  mensalidadeAluno.value = "";
  vencimentoAluno.value = "";
}

function receber(index) {
  entradas += alunos[index].mensalidade;

  const novaData = new Date(alunos[index].vencimento);
  novaData.setDate(novaData.getDate() + 30);
  alunos[index].vencimento = novaData.toISOString().split("T")[0];

  salvar();
  atualizarTela();
}

/* ===== ATUALIZAÃ‡ÃƒO ===== */
function atualizarTela() {
  const hoje = new Date().toISOString().split("T")[0];
  lista.innerHTML = "";

  alunos.forEach((a,i)=>{
    const atraso = a.vencimento < hoje;
    lista.innerHTML += `
      <tr>
        <td>${a.nome}</td>
        <td>R$ ${a.mensalidade.toFixed(2)}</td>
        <td>${a.vencimento}</td>
        <td class="${atraso?'status-atraso':'status-ok'}">
          ${atraso?'Em atraso':'Em dia'}
        </td>
        <td>
          <button onclick="receber(${i})">Receber</button>
        </td>
      </tr>
    `;
  });

  entradasSpan.innerText = entradas.toFixed(2);
  saidasSpan.innerText = saidas.toFixed(2);
  saldoSpan.innerText = (entradas - saidas).toFixed(2);
}

function salvar() {
  localStorage.setItem("alunos", JSON.stringify(alunos));
  localStorage.setItem("entradas", entradas);
  localStorage.setItem("saidas", saidas);
}
</script>

</body>
</html>
